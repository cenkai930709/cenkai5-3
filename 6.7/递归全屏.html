<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#box{
				width: 550px;
				height: 550px;
				margin:50px auto 0;
			}
			#box div{
				width: 50px;
				height: 50px;
				margin-right:5px;
				margin-bottom: 5px;
				background: red;
				line-height: 50px;
				text-align: center;
				float: left;
			}
		</style>
	</head>
	<body>
		<div id="box"></div>
		<script type="text/javascript">
			var box=document.getElementById('box');
			var str='';
			for(var i=0;i<100;i++){
				str+='<div>'+(i+1)+'</div>'
			}
			box.innerHTML=str;
			var divs=box.getElementsByTagName('div');
			for(var i=0;i<divs.length;i++){
				divs[i].onOff=true;
				divs[i].index=i;
				divs[i].onclick=function(){
					fn(this.index);
				}
			}
			function fn(n){
				if(!divs[n].onOff){
					return;
				}
				divs[n].onOff=false;
				
				divs[n].style.backgroundColor='yellow';
				setTimeout(function(){
					chaAll();
				},2000)
				//右
				if(Math.floor(n/10)==Math.floor((n+1)/10)){
					setTimeout(function(){
						fn(n+1)
					},100)
				}
				//左
				if(Math.floor(n/10)==Math.floor((n-1)/10)){
					setTimeout(function(){
						fn(n-1)
					},100)
				}
				//上
				if(n-10>=0){
					setTimeout(function(){
						fn(n-10)
					},100)
				}
				//下
				if(n+10<divs.length){
					setTimeout(function(){
						fn(n+10)
					},100)
				}
			}
			function chaAll(){
				var m=0;
				for(var i=0;i<divs.length;i++){
					if(!divs[i].onOff){
						m++;
					}
				}
				if(m==divs.length){
					for(var i=0;i<divs.length;i++){
						divs[i].style.backgroundColor='';
						divs[i].onOff=true;
					}
				}
			}
		</script>
	</body>
</html>
